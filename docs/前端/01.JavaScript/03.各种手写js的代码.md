---
title: 各种手写JS代码
date: 2022-3-22 16:00:51
permalink: /javascript/sjio12
categories:
  - JavaScript
tags:
  - JavaScript
---
# 各种手写JS代码

## 通用柯里化函数
```js
const carry = (fn, ...args) => {
  return (..._args) => {
    _args.unshift(...args)
    return _args.length < fn.length ? carry(fn, ..._args) : fn(..._args)
  }
}

const add = carry(function (a, b, c, d) {
  return a + b + c + d
})

console.log(add(1)(2, 3)(4))
```

## LRU缓存算法
```js
class LRUCache {
  constructor(capacity = 10) {
    this.map = new Map()
    this.capacity = capacity
  }

  get(key) {
    if (!this.map.has(key)) return -1
    const value = this.map.get(key)
    this.map.delete(key)
    this.map.set(key, value)
    return value
  }

  put(key, value) {
    if (this.map.has(key)) {
      this.map.delete(key)
    }
    this.map.set(key, value)
    while (this.map.size > this.capacity) {
      this.map.delete(this.map.keys().next().value)
    }
  }
}
```

## 列表转树
```js
function listToTree(data) {
  const temp = {}
  const treeData = []
  for (let i = 0; i < data.length; i++) {
    temp[data[i].id] = data[i];
  }
  for (let i in temp) {
    if (+temp[i].parentId != 0) {
      if (!temp[temp[i].parentId].children) {
        temp[temp[i].parentId].children = []
      }
      temp[temp[i].parentId].children.push(temp[i])
    } else {
      treeData.push(temp[i])
    }
  }
  return treeData
}
```